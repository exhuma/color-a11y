<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Readable Colors</title>
    <style>
        #Swatch {
            width: 300px;
            height: 200px;
            border: 2px solid black;
            display: flex;
            justify-content: center;
            align-items: center;
        }
    </style>
</head>
<body>
   <div id="Swatch">
    <div>
    Sample Text
    </div>
   </div> 
   <input type="range" name="red" id="HueSliderR" min="0" max="255"><br />
   <input type="range" name="green" id="HueSliderG" min="0" max="255"><br />
   <input type="range" name="blue" id="HueSliderB" min="0" max="255"><br />
   <input type="button" id="ButtonAuto" value="Toggle Auto" />
    <script type="module">
        import { getReadableComplement } from '/build/index.js';
        import { Color } from "./build/cmath.js";

        var swatch = document.getElementById("Swatch");
        var sliders = ["HueSliderR", "HueSliderG", "HueSliderB"];

        function setColor() {
            var rgb = sliders.map( name => {
                var slider = document.getElementById(name);
                return slider.value;
            });
            var bgHex = rgb.map(value => {
                var hexval = Math.round(value).toString(16);
                if (hexval.length < 2) {
                    hexval = `0${hexval}`
                }
                return hexval;
            });
            var color = new Color(...rgb);
            var complement = getReadableComplement(color);
            swatch.style.backgroundColor = `#${bgHex.join('')}`;
            swatch.style.color = complement.toHex();
        }

        sliders.map( name => {
            var slider = document.getElementById(name);
            slider.addEventListener("input", setColor);
        });

        let auto = false;
        var autoButton = document.getElementById("ButtonAuto");
        autoButton.addEventListener("click", () => auto = !auto);

        window.setInterval(() => {
            if (!auto) {
                return;
            }
            const rgb = [0, 0, 0].map(item => {
                return Math.round(Math.random() * 255);
            })
            var bgHex = rgb.map(value => {
                var hexval = Math.round(value).toString(16);
                if (hexval.length < 2) {
                    hexval = `0${hexval}`
                }
                return hexval;
            });
            var complement = getReadableComplement(new Color(...rgb));
            swatch.style.backgroundColor = `#${bgHex.join('')}`;
            swatch.style.color = complement.toHex();
            console.log(complement.toHex());
        }, 1000);
    </script>
</body>
</html>